"use strict";function initMaps(t,e,n,r,s,i,a,o,l,c,p,f,u,d){function g(t,n,r,s,i){var a=.99*$(".map-visy").width(),l=e,c=d3.geo.albers().scale(1).translate([0,0]),p=d3.geo.path().projection(c),f=p.bounds(n),u=.8,d=u/Math.max((f[1][0]-f[0][0])/a,(f[1][1]-f[0][1])/l),g=[(a-d*(f[1][0]+f[0][0]))/2,(l-d*(f[1][1]+f[0][1]))/2];c.scale(d).translate(g),d3.select("#map-visy-svg")&&d3.select("#map-visy-svg").remove();var y=d3.select(".map-visy").append("svg").attr("width",a).attr("height",l).attr("id","map-visy-svg").on("click",function(t){journeyConfigs.mapEl.visy.startAnimation()});$("#map-visy-svg").css({position:"absolute",top:-o});for(var h=(y.append("circle").attr("cx",a/2).attr("cy",l/2).attr("r",a/2).attr("fill",journeyConfigs.mapConfigs.colors.background).attr("stroke-width",0),y.append("clipPath").attr("id","mapClip").append("circle").attr("cx",a/2).attr("cy",l/2).attr("r",a/2),y.append("g").attr("class","mapGroup").attr("clip-path","url(#mapClip)")),m=h.append("g").attr("class","usStates"),j=h.append("g").attr("class","commDist"),C=h.append("g").attr("class","truckLines"),k=h.append("g").attr("class","bargeLines"),x=h.append("g").attr("class","recyDestPoints"),L=[],w=[],v=0;v<n.features.length;v++)"Visy 59th St"===n.features[v].properties.disposal?L.push(n.features[v].properties.d_id):"Visy"===n.features[v].properties.disposal&&w.push(n.features[v].properties.d_id);m.selectAll(".usStates").data(i.features).enter().append("path").attr({d:p}).style("stroke","black").style("stroke-width",0).style("fill",journeyConfigs.mapConfigs.colors.land).attr("class","usStates"),j.selectAll(".nycd").data(s.features).enter().append("path").attr({d:p}).style("stroke","black").style("stroke-width",0).style("fill",journeyConfigs.mapConfigs.colors.land).attr("class","nycd"),C.selectAll(".truckLines").data(n.features).enter().append("path").attr({d:p}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","truckLines"),k.selectAll(".bargeLines").data(t.features).enter().append("path").attr({d:p}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","bargeLines"),x.selectAll(".recyDestPoints").data(r.features).enter().append("circle").attr("cx",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("cy",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("r",0).style("stroke","#fff").style("stroke-width",1).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("class","recyDestPoints"),journeyConfigs.mapEl.visy.animationPlayed=!1,journeyConfigs.mapEl.visy.startAnimation=function(){journeyConfigs.mapEl.visy.animationPlayed||(journeyConfigs.mapEl.visy.animationPlayed=!0,x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).attr("r",0)}),j.selectAll(".nycd").each(function(t,e){d3.select(this).style("fill",journeyConfigs.mapConfigs.colors.land).attr("opacity",1)}),y.selectAll(".map-legend").remove(),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Visy 59th St"===t.properties.disposal}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.visy.visyManCircle()})}))},journeyConfigs.mapEl.visy.visyManCircle=function(){x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Visy 59th St"===t.properties.disposal}).attr("r",0).transition().duration(1500).attr("r",function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t.properties.j_tot_rec)}).each("end",function(){journeyConfigs.mapEl.visy.visyManLinesOut()})})},journeyConfigs.mapEl.visy.visyManLinesOut=function(){y.selectAll("text-visy-man").data(r.features).enter().append("text").filter(function(t){return"Visy 59th St"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(-15,0)"}).attr("class","visy-man-legend map-legend").attr("text-anchor","end").text("Marine transfer station"),y.selectAll("text-visy-man-below").data(r.features).enter().append("text").filter(function(t){return"Visy 59th St"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(-15,15)"}).attr("class","visy-man-legend map-legend").attr("text-anchor","end").text("at 59th st"),j.selectAll(".nycd").each(function(t,e){d3.select(this).filter(function(t){var e=null!==t.properties.BoroCD?t.properties.BoroCD.toString():"na",n=$.inArray(e,L)>=0;return!!n}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteOpacity).attr("opacity",1)}),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Visy 59th St"===t.properties.disposal}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.visy.visyBargeIn()})})},journeyConfigs.mapEl.visy.visyBargeIn=function(){k.selectAll(".bargeLines").each(function(t,e){d3.select(this).filter(function(t){return 1===t.properties.id}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.visy.visySiCircle()})})},journeyConfigs.mapEl.visy.visySiCircle=function(){x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Visy 59th St"===t.properties.disposal}).transition().duration(500).attr("r",0)}),y.selectAll(".visy-man-legend").attr("opacity",1).transition().duration(1500).attr("opacity",0),x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Visy"===t.properties.disposal}).attr("r",0).transition().duration(1500).attr("r",function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t.properties.j_tot_rec)}).each("end",function(){journeyConfigs.mapEl.visy.visyBargeOut()})})},journeyConfigs.mapEl.visy.visyBargeOut=function(){y.selectAll("text-visy-si").data(r.features).enter().append("text").filter(function(t){return"Visy"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(15,0)"}).attr("class","visy-si-legend map-legend").attr("alignment-baseline","middle").text("Pratt paper mill"),k.selectAll(".bargeLines").each(function(t,e){d3.select(this).filter(function(t){return 1===t.properties.id}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.visy.visyTrucksIn()})})},journeyConfigs.mapEl.visy.visyTrucksIn=function(){C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Visy"===t.properties.disposal}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.visy.visyTrucksOut()})})},journeyConfigs.mapEl.visy.visyTrucksOut=function(){j.selectAll(".nycd").each(function(t,e){d3.select(this).filter(function(t){var e=null!==t.properties.BoroCD?t.properties.BoroCD.toString():"na",n=$.inArray(e,w)>=0;return!!n}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteOpacity).attr("opacity",1)}),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Visy"===t.properties.disposal}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.visy.servedCdSiBklyn()})})},journeyConfigs.mapEl.visy.servedCdSiBklyn=function(){setTimeout(function(){journeyConfigs.mapEl.visy.animationPlayed=!1},1600)}}function y(t,n,r,s,i){var a=.99*$(".map-sims").width(),l=e,c=d3.geo.albers().scale(1).translate([0,0]),p=d3.geo.path().projection(c),f=p.bounds(n),u=.8,d=u/Math.max((f[1][0]-f[0][0])/a,(f[1][1]-f[0][1])/l),g=[(a-d*(f[1][0]+f[0][0]))/2,(l-d*(f[1][1]+f[0][1]))/2];c.scale(d).translate(g),d3.select("#map-sims-svg")&&d3.select("#map-sims-svg").remove();var y=d3.select(".map-sims").append("svg").attr("width",a).attr("height",l).attr("id","map-sims-svg").on("click",function(t){journeyConfigs.mapEl.sims.startAnimation()});$("#map-sims-svg").css({position:"absolute",top:-o});for(var h=(y.append("circle").attr("cx",a/2).attr("cy",l/2).attr("r",a/2).attr("fill",journeyConfigs.mapConfigs.colors.background).attr("stroke-width",0),y.append("clipPath").attr("id","mapClip").append("circle").attr("cx",a/2).attr("cy",l/2).attr("r",a/2),y.append("g").attr("class","mapGroup").attr("clip-path","url(#mapClip)")),m=h.append("g").attr("class","usStates"),j=h.append("g").attr("class","commDist"),C=h.append("g").attr("class","truckLines"),k=h.append("g").attr("class","bargeLines"),x=h.append("g").attr("class","recyDestPoints"),L=[],w=[],v=[],A=0;A<n.features.length;A++)"Sims - Jersey"===n.features[A].properties.disposal?L.push(n.features[A].properties.d_id):"Sims - Brooklyn"===n.features[A].properties.disposal?w.push(n.features[A].properties.d_id):"Sims - LIC"!==n.features[A].properties.disposal&&"Sims - Bronx"!==n.features[A].properties.disposal||v.push(n.features[A].properties.d_id);m.selectAll(".usStates").data(i.features).enter().append("path").attr({d:p}).style("stroke","black").style("stroke-width",0).style("fill",journeyConfigs.mapConfigs.colors.land).attr("class","usStates"),j.selectAll(".nycd").data(s.features).enter().append("path").attr({d:p}).style("stroke","black").style("stroke-width",0).style("fill",journeyConfigs.mapConfigs.colors.land).attr("class","nycd"),C.selectAll(".truckLines").data(n.features).enter().append("path").attr({d:p}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","truckLines"),k.selectAll(".bargeLines").data(t.features).enter().append("path").attr({d:p}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","bargeLines"),x.selectAll(".recyDestPoints").data(r.features).enter().append("circle").attr("cx",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("cy",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("r",0).style("stroke","#fff").style("stroke-width",1).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("class","recyDestPoints"),journeyConfigs.mapEl.sims.animationPlayed=!1,journeyConfigs.mapEl.sims.startAnimation=function(){journeyConfigs.mapEl.sims.animationPlayed||(journeyConfigs.mapEl.sims.animationPlayed=!0,x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).attr("r",0)}),j.selectAll(".nycd").each(function(t,e){d3.select(this).style("fill",journeyConfigs.mapConfigs.colors.land).attr("opacity",1)}),y.selectAll(".map-legend").remove(),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Jersey"===t.properties.disposal}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).style("stroke",journeyConfigs.mapConfigs.colors.complementary).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.sims.jerseyCircle()})}))},journeyConfigs.mapEl.sims.jerseyCircle=function(){x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Jersey"===t.properties.disposal}).attr("r",0).style("fill",journeyConfigs.mapConfigs.colors.complementary).transition().duration(1500).attr("r",function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t.properties.j_tot_rec)}).each("end",function(){journeyConfigs.mapEl.sims.jerseyLinesOut()})})},journeyConfigs.mapEl.sims.jerseyLinesOut=function(){y.selectAll("text-sims-jersey").data(r.features).enter().append("text").filter(function(t){return"Sims - Jersey"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(-15,0)"}).attr("class","sims-jersey-legend map-legend").attr("text-anchor","end").text("Sims – Jersey City"),y.selectAll("text-sims-jersey-below").data(r.features).enter().append("text").filter(function(t){return"Sims - Jersey"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(-15,15)"}).attr("class","sims-jersey-legend map-legend").attr("text-anchor","end").text("Sorting facility"),j.selectAll(".nycd").each(function(t,e){d3.select(this).filter(function(t){var e=null!==t.properties.BoroCD?t.properties.BoroCD.toString():"na",n=$.inArray(e,L)>=0;return!!n}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.complementaryOpacity).attr("opacity",1)}),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Jersey"===t.properties.disposal}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.sims.truckToBarge()})})},journeyConfigs.mapEl.sims.truckToBarge=function(){C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - LIC"===t.properties.disposal||"Sims - Bronx"===t.properties.disposal}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.sims.bargeTsCircle()})})},journeyConfigs.mapEl.sims.bargeTsCircle=function(){x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Sims - LIC"===t.properties.disposal||"Sims - Bronx"===t.properties.disposal}).attr("r",0).transition().duration(1500).attr("r",function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t.properties.j_tot_rec)}).each("end",function(){journeyConfigs.mapEl.sims.truckToBargeOut()})})},journeyConfigs.mapEl.sims.truckToBargeOut=function(){y.selectAll("text-mts").data(r.features).enter().append("text").filter(function(t){return"Sims - LIC"===t.properties.disposal||"Sims - Bronx"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(15,0)"}).attr("class","mts-legend map-legend").text("Marine transfer station"),j.selectAll(".nycd").each(function(t,e){d3.select(this).filter(function(t){var e=null!==t.properties.BoroCD?t.properties.BoroCD.toString():"na",n=$.inArray(e,v)>=0;return!!n}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteOpacity).attr("opacity",1)}),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - LIC"===t.properties.disposal||"Sims - Bronx"===t.properties.disposal}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.sims.bargeIn()})})},journeyConfigs.mapEl.sims.bargeIn=function(){k.selectAll(".bargeLines").each(function(t,e){d3.select(this).filter(function(t){return 1!==t.properties.id}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.sims.sunsetParkCircle()})})},journeyConfigs.mapEl.sims.sunsetParkCircle=function(){x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Sims - LIC"===t.properties.disposal||"Sims - Bronx"===t.properties.disposal}).transition().duration(1500).attr("r",0)}),x.selectAll(".recyDestPoints").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Brooklyn"===t.properties.disposal}).attr("r",0).transition().duration(1500).attr("r",function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t.properties.j_tot_rec)}).each("end",function(){journeyConfigs.mapEl.sims.bargeOut()})})},journeyConfigs.mapEl.sims.bargeOut=function(){y.selectAll(".mts-legend").attr("opacity",1).transition().duration(1500).attr("opacity",0),y.selectAll("text-sims-brooklyn").data(r.features).enter().append("text").filter(function(t){return"Sims - Brooklyn"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(15,0)"}).attr("class","sims-brooklyn-legend map-legend").text("Sims – Brooklyn"),y.selectAll("text-sims-brooklyn-below").data(r.features).enter().append("text").filter(function(t){return"Sims - Brooklyn"===t.properties.disposal}).attr("x",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("y",function(t){return c([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("transform",function(t){return"translate(15,15)"}).attr("class","sims-brooklyn-legend map-legend").text("Sorting facility"),k.selectAll(".bargeLines").each(function(t,e){d3.select(this).filter(function(t){return 1!==t.properties.id}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.sims.sunsetParkTrucksIn()})})},journeyConfigs.mapEl.sims.sunsetParkTrucksIn=function(){C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Brooklyn"===t.properties.disposal}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.sims.sunsetParkTrucksOut()})})},journeyConfigs.mapEl.sims.sunsetParkTrucksOut=function(){j.selectAll(".nycd").each(function(t,e){d3.select(this).filter(function(t){var e=null!==t.properties.BoroCD?t.properties.BoroCD.toString():"na",n=$.inArray(e,w)>=0;return!!n}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteOpacity).attr("opacity",1)}),C.selectAll(".truckLines").each(function(t,e){d3.select(this).filter(function(t){return"Sims - Brooklyn"===t.properties.disposal}).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.sims.servedSunsetPark()})})},journeyConfigs.mapEl.sims.servedSunsetPark=function(){setTimeout(function(){journeyConfigs.mapEl.sims.animationPlayed=!1},1600)}}function h(t,n,r,s,i,a){var l=.99*$(".map-recyexport").width(),c=e,p=e/1.95,f=d3.geo.stereographic().scale(p).translate([l/2,c/2]).rotate([0,-45]).precision(.1),u=d3.geo.path().projection(f);d3.select("#map-recyexport-svg")&&d3.select("#map-recyexport-svg").remove();var d=d3.select(".map-recyexport").append("svg").attr("width",l).attr("height",c).attr("id","map-recyexport-svg").on("click",function(t){journeyConfigs.mapEl.recyexport.startAnimation()});$("#map-recyexport-svg").css({position:"absolute",top:-o});var g=(d.append("circle").attr("cx",l/2).attr("cy",c/2).attr("r",l/2).attr("fill",journeyConfigs.mapConfigs.colors.background).attr("stroke-width",0),d.append("clipPath").attr("id","mapClip").append("circle").attr("cx",l/2).attr("cy",c/2).attr("r",l/2),d.append("g").attr("class","mapGroup").attr("clip-path","url(#mapClip)")),y=g.append("g").attr("class","worldLand"),h=g.append("g").attr("class","exportNationalLines"),m=g.append("g").attr("class","exportLines"),j=g.append("g").attr("class","exportPolygons"),C=g.append("g").attr("class","nycPoint"),k=g.append("g").attr("class","exportPolygonsLabels");C.selectAll(".nycPoint").data(s.features).enter().append("circle").attr("cx",function(t){return f([t.geometry.coordinates[0],t.geometry.coordinates[1]])[0]}).attr("cy",function(t){return f([t.geometry.coordinates[0],t.geometry.coordinates[1]])[1]}).attr("r",2).style("stroke","#fff").style("stroke-width",1).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("class","nycPoint"),y.selectAll(".worldLand").data(a.features).enter().append("path").attr({d:u}).style("stroke","black").style("stroke-width",0).style("fill",journeyConfigs.mapConfigs.colors.land).attr("class","worldLand"),j.selectAll(".exportPolygons").data(r.features).enter().append("path").attr({d:u}).style("stroke","#fff").style("stroke-width",.75).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("opacity",0).attr("class","exportPolygons"),k.selectAll(".exportPolygonsLabels").data(r.features).enter().append("text").attr("class","exportPolygonsLabels map-label").attr("transform",function(t){return"translate("+u.centroid(t)+")"}).style("font-size","0.75em").attr("text-anchor","middle").attr("opacity",0).text(function(t){return e<480&&2===t.properties.name.length?"":t.properties.name}),h.selectAll(".exportNationalLines").data(n.features).enter().append("path").attr({d:u}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","exportNationalLines"),m.selectAll(".exportLines").data(t.features).enter().append("path").attr({d:u}).style("stroke",journeyConfigs.mapConfigs.colors.wasteLines).attr("stroke-width",function(t){return 2}).style("fill","none").attr("stroke-dasharray",function(t){return this.getTotalLength()+" "+this.getTotalLength()}).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).attr("class","exportLines"),journeyConfigs.mapEl.recyexport.animationPlayed=!1,journeyConfigs.mapEl.recyexport.startAnimation=function(){journeyConfigs.mapEl.recyexport.animationPlayed||(journeyConfigs.mapEl.recyexport.animationPlayed=!0,j.selectAll(".exportPolygons").each(function(t,e){d3.select(this).attr("opacity",0)}),k.selectAll(".exportPolygonsLabels").each(function(t,e){d3.select(this).attr("opacity",0)}),d.selectAll(".map-legend").remove(),h.selectAll(".exportNationalLines").each(function(t,e){d3.select(this).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(1500).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.recyexport.nationalPolygons()})}))},journeyConfigs.mapEl.recyexport.nationalPolygons=function(){if(j.selectAll(".exportPolygons").each(function(t,e){d3.select(this).filter(function(t){return"India"!==t.properties.name&&"China"!==t.properties.name}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("opacity",.4)}),k.selectAll(".exportPolygonsLabels").each(function(t,e){d3.select(this).filter(function(t){return"India"!==t.properties.name&&"China"!==t.properties.name}).transition().duration(1500).attr("opacity",1)}),e<480){var t=["IL","AL","IN","OH","NC","PA"];d.selectAll("text-states").data(t).enter().append("text").attr("transform",function(t,e){return"translate("+l/8+","+(c/3+12.5*e)+")"}).attr("class","text-states-legend map-legend").style("font-size","0.75em").text(function(e,n){return t[n]}).attr("opacity",0).transition().duration(1500).attr("opacity",.2)}h.selectAll(".exportNationalLines").each(function(t,e){d3.select(this).attr("stroke-dashoffset",0).transition().duration(1500).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){journeyConfigs.mapEl.recyexport.internationalLines()})})},journeyConfigs.mapEl.recyexport.internationalLines=function(){m.selectAll(".exportLines").each(function(t,e){d3.select(this).attr("stroke-dashoffset",function(t){return this.getTotalLength()}).transition().duration(3e3).attr("stroke-dashoffset",0).each("end",function(){journeyConfigs.mapEl.recyexport.internationalPolygons()})})},journeyConfigs.mapEl.recyexport.internationalPolygons=function(){j.selectAll(".exportPolygons").each(function(t,e){d3.select(this).filter(function(t){return"India"===t.properties.name||"China"===t.properties.name}).transition().duration(1500).style("fill",journeyConfigs.mapConfigs.colors.wasteCircles).attr("opacity",.4)}),k.selectAll(".exportPolygonsLabels").each(function(t,e){d3.select(this).filter(function(t){return"India"===t.properties.name||"China"===t.properties.name}).transition().duration(1500).attr("opacity",1)}),m.selectAll(".exportLines").each(function(t,e){d3.select(this).attr("stroke-dashoffset",0).transition().duration(3e3).attr("stroke-dashoffset",function(t){return-this.getTotalLength()}).each("end",function(){})}),setTimeout(function(){journeyConfigs.mapEl.recyexport.animationPlayed=!1},3e3)}}journeyConfigs.mapConfigs.colors={background:"#edf0ff",land:"#d9d9d9",wasteLines:"#f15a29",wasteCircles:"#f15a29",wasteOpacity:"#e3a793",complementary:"#1485CC",complementaryOpacity:"#8bb8d5"},journeyConfigs.mapConfigs.scales={circleRadius:function(t){return.025*Math.sqrt(t/3.14)*2},lineWidth:function(t){return journeyConfigs.mapConfigs.scales.circleRadius(t)/2}},d3.json(journeyConfigs.mapDataPath,function(t){var e=t.nycd_bcd,n=t.ny_nj_ct_refined,r=(t.states_east,t.recy_barge_lines),s=t.recy_dest_lines,i=t.recy_dest_points,a=t.export_international,o=t.export_polygons,l=t.export_national_lines,c=t.world,p=t.nyc_point;g(r,s,i,e,n),y(r,s,i,e,n),h(a,l,o,p,e,c)})}var visImageSizes=[{height:600,width:244,type:"jpg",filename:"600_canner-cart.jpg"},{height:600,width:416,type:"jpg",filename:"600_canner-picking.jpg"},{height:600,width:1316,type:"jpg",filename:"600_inside-sims-1.jpg"},{height:600,width:722,type:"jpg",filename:"600_inside-sims-2.jpg"},{height:600,width:742,type:"jpg",filename:"600_inside-sims-3.jpg"},{height:600,width:652,type:"jpg",filename:"600_loading-treadmill.jpg"},{height:600,width:1560,type:"jpg",filename:"600_pratt-barge.jpg"},{height:600,width:983,type:"jpg",filename:"600_pratt-boxes.jpg"},{height:600,width:1131,type:"jpg",filename:"600_pratt-claw.jpg"},{height:600,width:808,type:"jpg",filename:"600_pratt-spool.jpg"},{height:600,width:1301,type:"jpg",filename:"600_sims-bundles-1.jpg"},{height:600,width:918,type:"jpg",filename:"600_sims-bundles-2.jpg"},{height:600,width:1221,type:"jpg",filename:"600_sims-bundles-3.jpg"},{height:600,width:960,type:"jpg",filename:"600_sims-manual-sorting.jpg"},{height:600,width:2522,type:"jpg",filename:"600_sims-scale.jpg"},{height:600,width:1124,type:"jpg",filename:"600_tipping-barge.jpg"},{height:600,width:1476,type:"jpg",filename:"600_tipping-entrance.jpg"},{height:600,width:1239,type:"jpg",filename:"600_tipping-mgp.jpg"},{height:600,width:1150,type:"jpg",filename:"600_tipping-paper.jpg"},{height:600,width:1157,type:"jpg",filename:"600_truck-collection.jpg"},{height:600,width:216,type:"jpg",filename:"600_woman-walking.jpg"},{height:800,width:325,type:"jpg",filename:"800_canner-cart.jpg"},{height:800,width:555,type:"jpg",filename:"800_canner-picking.jpg"},{height:800,width:1754,type:"jpg",filename:"800_inside-sims-1.jpg"},{height:800,width:963,type:"jpg",filename:"800_inside-sims-2.jpg"},{height:800,width:869,type:"jpg",filename:"800_loading-treadmill.jpg"},{height:800,width:2080,type:"jpg",filename:"800_pratt-barge.jpg"},{height:800,width:1310,type:"jpg",filename:"800_pratt-boxes.jpg"},{height:800,width:1508,type:"jpg",filename:"800_pratt-claw.jpg"},{height:800,width:1077,type:"jpg",filename:"800_pratt-spool.jpg"},{height:800,width:1734,type:"jpg",filename:"800_sims-bundles-1.jpg"},{height:800,width:1224,type:"jpg",filename:"800_sims-bundles-2.jpg"},{height:800,width:1628,type:"jpg",filename:"800_sims-bundles-3.jpg"},{height:800,width:1280,type:"jpg",filename:"800_sims-manual-sorting.jpg"},{height:800,width:3362,type:"jpg",filename:"800_sims-scale.jpg"},{height:800,width:1498,type:"jpg",filename:"800_tipping-barge.jpg"},{height:800,width:1968,type:"jpg",filename:"800_tipping-entrance.jpg"},{height:800,width:1652,type:"jpg",filename:"800_tipping-mgp.jpg"},{height:800,width:1533,type:"jpg",filename:"800_tipping-paper.jpg"},{height:800,width:1543,type:"jpg",filename:"800_truck-collection.jpg"},{height:800,width:288,type:"jpg",filename:"800_woman-walking.jpg"}],journeyConfigs={};journeyConfigs.meta={name:"Recyclables",slug:"recyclables",id:1},journeyConfigs.firstPanelId="panel-0-1",journeyConfigs.mapEl={visy:{id:"1-2"},sims:{id:"2-1"},recyexport:{id:"3-9"}},journeyConfigs.mapDataPath="data/recyclables.geojson",journeyConfigs.mapConfigs={};